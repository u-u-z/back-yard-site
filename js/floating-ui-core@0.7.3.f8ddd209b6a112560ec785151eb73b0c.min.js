!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).FloatingUICore={})}(this,function(e){"use strict";function t(e){return e.split("-")[0]}function n(e){return e.split("-")[1]}function o(e){return["top","bottom"].includes(t(e))?"x":"y"}function d(e){return"y"===e?"height":"width"}function p(p,r,l){let{reference:e,floating:i}=p;const f=e.x+e.width/2-i.width/2,c=e.y+e.height/2-i.height/2,a=o(r),u=d(a),h=e[u]/2-i[u]/2,m="x"===a;let s;switch(t(r)){case"top":s={x:f,y:e.y-i.height};break;case"bottom":s={x:f,y:e.y+e.height};break;case"right":s={x:e.x+e.width,y:c};break;case"left":s={x:e.x-i.width,y:c};break;default:s={x:e.x,y:e.y}}switch(n(r)){case"start":s[a]-=h*(l&&m?-1:1);break;case"end":s[a]+=h*(l&&m?-1:1)}return s}function l(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function a(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function i(j,i){var u;void 0===i&&(i={});const{x:b,y:v,platform:e,rects:r,elements:c,strategy:h}=j,{boundary:m="clippingAncestors",rootBoundary:g="viewport",elementContext:t="floating",altBoundary:f=!1,padding:p=0}=i,s=l(p),d=c[f?"floating"===t?"reference":"floating":t],n=a(await e.getClippingRect({element:null==(u=await(null==e.isElement?void 0:e.isElement(d)))||u?d:d.contextElement||await(null==e.getDocumentElement?void 0:e.getDocumentElement(c.floating)),boundary:m,rootBoundary:g,strategy:h})),o=a(e.convertOffsetParentRelativeRectToViewportRelativeRect?await e.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===t?{...r.floating,x:b,y:v}:r.reference,offsetParent:await(null==e.getOffsetParent?void 0:e.getOffsetParent(c.floating)),strategy:h}):r[t]);return{top:n.top-o.top+s.top,bottom:o.bottom-n.bottom+s.bottom,left:n.left-o.left+s.left,right:o.right-n.right+s.right}}const h=Math.min,s=Math.max;function u(e,t,n){return s(e,h(t,n))}const j={left:"right",right:"left",bottom:"top",top:"bottom"};function r(e){return e.replace(/left|right|bottom|top/g,e=>j[e])}function m(l,s,t){void 0===t&&(t=!1);const i=n(l),a=o(l),c=d(a);let e="x"===a?i===(t?"end":"start")?"right":"left":"start"===i?"bottom":"top";return s.reference[c]>s.floating[c]&&(e=r(e)),{main:e,cross:r(e)}}const _={start:"end",end:"start"};function c(e){return e.replace(/start|end/g,e=>_[e])}const g=["top","right","bottom","left"],y=g.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);function v(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function b(e){return g.some(t=>e[t]>=0)}function f(e){return"x"===e?"y":"x"}e.arrow=e=>({name:"arrow",options:e,async fn(O){const{element:h,padding:M=0}=e??{},{x:S,y:A,placement:j,rects:s,platform:m}=O;if(null==h)return{};const r=l(M),f={x:S,y:A},t=o(j),k=n(j),i=d(t),y=await m.getDimensions(h),_="y"===t?"top":"left",w="y"===t?"bottom":"right",C=s.reference[i]+s.reference[t]-f[t]-s.floating[i],x=f[t]-s.reference[t],v=await(null==m.getOffsetParent?void 0:m.getOffsetParent(h));let c=v?"y"===t?v.clientHeight||0:v.clientWidth||0:0;0===c&&(c=s.floating[i]);const E=C/2-x/2,g=r[_],b=c-y[i]-r[w],a=c/2-y[i]/2+E,p=u(g,a,b),F=("start"===k?r[_]:r[w])>0&&a!==p&&s.reference[i]<=s.floating[i];return{[t]:f[t]-(F?a<g?g-a:b-a:0),data:{[t]:p,centerOffset:a-p}}}}),e.autoPlacement=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(_){var w,j,b,f,d;const{x:D,y:z,rects:T,middlewareData:p,placement:g,platform:v,elements:F}=_,{alignment:k=null,allowedPlacements:N=y,autoAlignment:E=!0,...C}=e,a=function(e,o,s){return(e?[...s.filter(t=>n(t)===e),...s.filter(t=>n(t)!==e)]:s.filter(e=>t(e)===e)).filter(t=>!e||n(t)===e||!!o&&c(t)!==t)}(k,E,N),l=await i(_,C),o=null!=(w=null==(j=p.autoPlacement)?void 0:j.index)?w:0,s=a[o];if(null==s)return{};const{main:A,cross:S}=m(s,T,await(null==v.isRTL?void 0:v.isRTL(F.floating)));if(g!==s)return{x:D,y:z,reset:{placement:a[0]}};const M=[l[t(s)],l[A],l[S]],r=[...null!=(b=null==(f=p.autoPlacement)?void 0:f.overflows)?b:[],{placement:s,overflows:M}],O=a[o+1];if(O)return{data:{index:o+1,overflows:r},reset:{placement:O}};const h=r.slice().sort((e,t)=>e.overflows[0]-t.overflows[0]),u=null==(d=h.find(e=>{let{overflows:t}=e;return t.every(e=>e<=0)}))?void 0:d.placement,x=u??h[0].placement;return x!==g?{data:{index:o+1,overflows:r},reset:{placement:x}}:{}}}},e.computePosition=async(c,o,m)=>{const{placement:l="bottom",strategy:i="absolute",middleware:u=[],platform:s}=m,d=await(null==s.isRTL?void 0:s.isRTL(o));let r=await s.getElementRects({reference:c,floating:o,strategy:i}),{x:n,y:e}=p(r,l,d),a=l,t={},h=0;for(let f=0;f<u.length;f++){const{name:g,fn:j}=u[f],{x:v,y:b,data:y,reset:m}=await j({x:n,y:e,initialPlacement:l,placement:a,strategy:i,middlewareData:t,rects:r,platform:s,elements:{reference:c,floating:o}});n=v??n,e=b??e,t={...t,[g]:{...t[g],...y}},m&&h<=50&&(h++,"object"==typeof m&&(m.placement&&(a=m.placement),m.rects&&(r=!0===m.rects?await s.getElementRects({reference:c,floating:o,strategy:i}):m.rects),{x:n,y:e}=p(r,a,d)),f=-1)}return{x:n,y:e,placement:a,strategy:i,middlewareData:t}},e.detectOverflow=i,e.flip=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(v){var u,f,g,b;const{placement:s,middlewareData:p,rects:k,initialPlacement:n,platform:h,elements:E}=v,{mainAxis:C=!0,crossAxis:x=!0,fallbackPlacements:O,fallbackStrategy:A="bestFit",flipAlignment:y=!0,...j}=e,d=t(s),_=O||(d===n||!y?[r(n)]:function(e){const t=r(e);return[c(e),t,c(t)]}(n)),w=[n,..._],l=await i(v,j),o=[];let a=(null==(u=p.flip)?void 0:u.overflows)||[];if(C&&o.push(l[d]),x){const{main:e,cross:t}=m(s,k,await(null==h.isRTL?void 0:h.isRTL(E.floating)));o.push(l[e],l[t])}if(a=[...a,{placement:s,overflows:o}],!o.every(e=>e<=0)){const t=(null!=(f=null==(g=p.flip)?void 0:g.index)?f:0)+1,o=w[t];if(o)return{data:{index:t,overflows:a},reset:{placement:o}};let e="bottom";switch(A){case"bestFit":{const t=null==(b=a.map(e=>[e,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:b[0].placement;t&&(e=t);break}case"initialPlacement":e=n}if(s!==e)return{reset:{placement:e}}}return{}}}},e.hide=function(e){let{strategy:n="referenceHidden",...t}=void 0===e?{}:e;return{name:"hide",async fn(e){const{rects:s}=e;switch(n){case"referenceHidden":{const n=v(await i(e,{...t,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:n,referenceHidden:b(n)}}}case"escaped":{const n=v(await i(e,{...t,altBoundary:!0}),s.floating);return{data:{escapedOffsets:n,escaped:b(n)}}}default:return{}}}}},e.inline=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(y){var v;const{placement:u,elements:m,rects:r,platform:i,strategy:g}=y,{padding:j=2,x:f,y:p}=e,b=a(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:r.reference,offsetParent:await(null==i.getOffsetParent?void 0:i.getOffsetParent(m.floating)),strategy:g}):r.reference),n=null!=(v=await(null==i.getClientRects?void 0:i.getClientRects(m.reference)))?v:[],d=l(j),c=await i.getElementRects({reference:{getBoundingClientRect:function(){var e;if(2===n.length&&n[0].left>n[1].right&&null!=f&&null!=p)return null!=(e=n.find(e=>f>e.left-d.left&&f<e.right+d.right&&p>e.top-d.top&&p<e.bottom+d.bottom))?e:b;if(n.length>=2){if("x"===o(u)){const e=n[0],s=n[n.length-1],a="top"===t(u),o=e.top,r=s.bottom,i=a?e.left:s.left,c=a?e.right:s.right;return{top:o,bottom:r,left:i,right:c,width:c-i,height:r-o,x:i,y:o}}const l="left"===t(u),i=s(...n.map(e=>e.right)),e=h(...n.map(e=>e.left)),a=n.filter(t=>l?t.left===e:t.right===i),r=a[0].top,c=a[a.length-1].bottom;return{top:r,bottom:c,left:e,right:i,width:i-e,height:c-r,x:e,y:r}}return b}},floating:m.floating,strategy:g});return r.reference.x!==c.reference.x||r.reference.y!==c.reference.y||r.reference.width!==c.reference.width||r.reference.height!==c.reference.height?{reset:{rects:c}}:{}}}},e.limitShift=function(e){return void 0===e&&(e={}),{options:e,fn(O){const{x:w,y:_,placement:l,rects:n,middlewareData:m}=O,{offset:d=0,mainAxis:y=!0,crossAxis:j=!0}=e,h={x:w,y:_},s=o(l),i=f(s);let a=h[s],r=h[i];const u="function"==typeof d?d({...n,placement:l}):d,c="number"==typeof u?{mainAxis:u,crossAxis:0}:{mainAxis:0,crossAxis:0,...u};if(y){const e="y"===s?"height":"width",t=n.reference[s]-n.floating[e]+c.mainAxis,o=n.reference[s]+n.reference[e]-c.mainAxis;a<t?a=t:a>o&&(a=o)}if(j){var v,p,g,b;const o="y"===s?"width":"height",e=["top","left"].includes(t(l)),a=n.reference[i]-n.floating[o]+(e&&null!=(v=null==(p=m.offset)?void 0:p[i])?v:0)+(e?0:c.crossAxis),d=n.reference[i]+n.reference[o]+(e?0:null!=(g=null==(b=m.offset)?void 0:b[i])?g:0)-(e?c.crossAxis:0);r<a?r=a:r>d&&(r=d)}return{[s]:a,[i]:r}}}},e.offset=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(i){const{x:a,y:r}=i,s=await async function(f,s){const{placement:i,platform:d,elements:v}=f,g=await(null==d.isRTL?void 0:d.isRTL(v.floating)),p=t(i),c=n(i),u="x"===o(i),h=["left","top"].includes(p)?-1:1,m=g&&u?-1:1,e="function"==typeof s?s(f):s;let{mainAxis:l,crossAxis:r,alignmentAxis:a}="number"==typeof e?{mainAxis:e,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...e};return c&&"number"==typeof a&&(r="end"===c?-1*a:a),u?{x:r*m,y:l*h}:{x:l*h,y:r*m}}(i,e);return{x:a+s.x,y:r+s.y,data:s}}}},e.rectToClientRect=a,e.shift=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(l){const{x:h,y:p,placement:b}=l,{mainAxis:v=!0,crossAxis:g=!1,limiter:j={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...y}=e,m={x:h,y:p},c=await i(l,y),a=o(t(b)),r=f(a);let s=m[a],n=m[r];if(v){const e="y"===a?"bottom":"right";s=u(s+c["y"===a?"top":"left"],s,s-c[e])}if(g){const e="y"===r?"bottom":"right";n=u(n+c["y"===r?"top":"left"],n,n-c[e])}const d=j.fn({...l,[a]:s,[r]:n});return{...d,data:{x:d.x-h,y:d.y-p}}}}},e.size=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(h){const{placement:c,rects:g,platform:r,elements:d}=h,{apply:p,...O}=e,o=await i(h,O),a=t(c),m=n(c);let u,l;"top"===a||"bottom"===a?(u=a,l=m===(await(null==r.isRTL?void 0:r.isRTL(d.floating))?"start":"end")?"left":"right"):(l=a,u="end"===m?"top":"bottom");const v=s(o.left,0),b=s(o.right,0),j=s(o.top,0),y=s(o.bottom,0),w={availableHeight:g.floating.height-(["left","right"].includes(c)?2*(0!==j||0!==y?j+y:s(o.top,o.bottom)):o[u]),availableWidth:g.floating.width-(["top","bottom"].includes(c)?2*(0!==v||0!==b?v+b:s(o.left,o.right)):o[l])},f=await r.getDimensions(d.floating);null==p||p({...h,...w});const _=await r.getDimensions(d.floating);return f.width!==_.width||f.height!==_.height?{reset:{rects:!0}}:{}}}},Object.defineProperty(e,"__esModule",{value:!0})})